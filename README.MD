# ⚡ 通用网页倍速控制器 (Universal Web Speed Controller)

这是一个强大的 Tampermonkey (油猴) 脚本，不仅支持传统的 HTML5 视频/音频倍速播放，还独创性地支持 **Unity WebGL、Cocos Creator、LayaAir** 等网页游戏的全局时间加速。

## ✨ 主要功能

1. **全能倍速**：同时控制网页上的 `<video>`、`<audio>` 标签以及 JS 游戏引擎的时间流逝。
2. **游戏加速**：专为网页版 Unity/Canvas 游戏设计，通过底层劫持 `performance.now` 和 `requestAnimationFrame` 实现真正的游戏快进（如跑图、剧情跳过）。
3. **悬浮控制面板**：在页面左上角提供半透明悬浮窗，鼠标移入即可操作，界面简洁，不遮挡视线。
4. **防重置机制**：每秒自动检查页面状态，防止部分视频网站或游戏在切换场景后重置速度。
5. **即时生效**：无需刷新页面，输入倍率点击“应用”立刻见效。

## 🛠️ 安装方法

**安装教程:**[Edge 浏览器安装指南 | 通用网页倍速控制器](https://aquasofts.github.io/Universal-Web-Speed-Controller/guide/edge.html)

1. **安装扩展**： 确保你的浏览器（Chrome, Edge, Firefox 等）已安装 **Tampermonkey** 或 **Violentmonkey** 扩展。
2. **添加脚本**：
   - 点击浏览器扩展栏的油猴图标 -> **添加新脚本**。
   - 删除编辑器内所有默认代码。
   - 将 `universal_speed_control.user.js` 中的代码完整复制粘贴进去。
   - 按 `Ctrl + S` 保存。

## 📖 使用指南

1. **启动**：打开任意的网页，脚本会自动运行。
2. **UI 界面**：
   - 页面 **左上角** 会出现一个半透明的黑色小方块 `⚡ 全局加速`。
   - 鼠标移动到方块上，面板会变得清晰并展开。
3. **调节速度**：
   - 在输入框中填入想要的倍率（例如 `2.5` 表示 2.5 倍速，`0.5` 表示慢放）。
   - 点击 **“应用”** 按钮（或按回车键）。
   - 下方状态栏显示绿色文字即表示成功。
4. **恢复默认**：点击 **“重置”** 按钮即可一键恢复到 1.0x 正常速度。

## 🎮 适用场景

- **视频网站**：Bilibili、YouTube、腾讯视频、网课平台等（突破官方倍速上限）。
- **网页游戏**：
  - Unity WebGL 游戏（常见于 itch.io, 4399 等）。
  - RPG Maker MV/MZ 网页版。
  - 各类放置挂机类网页游戏。
  - Canvas 渲染的互动动画。

## ⚠️ 注意事项

1. **联机游戏风险**：请勿在**多人联机竞技**（如 .io 类游戏或即时对战游戏）中使用，这可能会被服务器判定为作弊（SpeedHack）导致封号。建议仅在单机流程或挂机游戏中使用。
2. **音画同步**：极高倍速（如 >10x）下，部分浏览器的音频解码可能跟不上，导致没有声音，这是正常现象。
3. **兼容性**：虽然脚本尝试劫持了最通用的时间 API，但极少数使用非标准计时方式的游戏可能不受影响。

## 🔧 技术原理

脚本通过在 `document-start` 阶段注入代码，代理了浏览器的核心时间 API：

- `Date.now()`
- `performance.now()`
- `window.requestAnimationFrame()`

通过维护一个虚拟的“世界时间”变量，当设为 2 倍速时，真实世界过 1 秒，脚本告诉游戏引擎已经过了 2 秒，从而实现逻辑层面的加速。